# 🔑 最終解決策：新しいAPIキーでビルド

## 🚨 現状
- Places API (New) を追加済み ✅
- Gemini API の制限を解除済み ✅
- OAuth同意画面を設定済み ✅
- 請求先アカウントをリンク済み ✅
- **それでもエラーが出る** ❌

---

## 💡 最終手段

### 既存のAPIキーを削除して、完全に新しいキーを作成

理由：
- 既存のAPIキーに何らかの隠れた問題がある可能性
- 設定変更の履歴が悪影響を及ぼしている可能性
- Google Cloud側のキャッシュ問題

---

## 🚀 新しいAPIキーを作成（完全クリーン版）

### ステップ1: 新しい Gemini API Key を作成

```
Google Cloud Console:
1. APIs & Services → 認証情報
2. "+ 認証情報を作成" → "API キー"
3. APIキーが作成される → すぐにコピー

例: AIzaSyC_NEWKEY1234567890ABCDEF
```

#### 制限設定
```
4. 作成されたキーの名前をクリック
5. 名前: GYM MATCH - Gemini API v2 (Clean)
6. アプリケーションの制限: なし
7. API の制限:
   ☑ キーを制限しない（最初は制限なしでテスト）
8. 保存
```

---

### ステップ2: 新しい Places API Key を作成

```
同じ手順で:
1. "+ 認証情報を作成" → "API キー"
2. コピー

例: AIzaSyD_NEWKEY0987654321ZYXWVU
```

#### 制限設定
```
3. 名前: GYM MATCH - Places API v2 (Clean)
4. アプリケーションの制限: なし
5. API の制限:
   ☑ キーを制限しない（最初は制限なしでテスト）
6. 保存
```

---

## 📝 新しいAPIキーを共有してください

以下の形式で共有してください：

```
Gemini API Key (新v2): AIzaSyC_XXXXXXXXXXXXXXXXXX
Places API Key (新v2): AIzaSyD_XXXXXXXXXXXXXXXXXX
```

---

## 🔧 コードを更新してv1.0.198をビルド

新しいAPIキーを共有していただければ、すぐに：
1. コードを更新
2. v1.0.198 をコミット&タグ
3. GitHub Actions でビルド
4. TestFlight でテスト

---

## ⏱️ ビルド時間

| 作業 | 所要時間 |
|------|----------|
| APIキー作成（2個） | 3分 |
| コード更新 | 2分 |
| GitHub Push | 1分 |
| iOS ビルド | 15-20分 |
| **合計** | **約25分** |

---

## 🎯 なぜこれで解決するか

### 新しいAPIキーの利点
```
✅ 設定変更の履歴なし（クリーンな状態）
✅ Google Cloud側のキャッシュ問題を回避
✅ 隠れた設定ミスを完全にリセット
✅ 制限なしでテスト → 動作確認 → 後で制限追加
```

---

## 📋 チェックリスト

### 事前確認
- [ ] Generative Language API が有効化されている
- [ ] Places API が有効化されている
- [ ] Places API (New) が有効化されている
- [ ] 請求先アカウントがリンクされている

### 新しいAPIキー作成
- [ ] Gemini API Key を作成（制限なし）
- [ ] Places API Key を作成（制限なし）
- [ ] 両方のキーをコピー

### ビルド
- [ ] 新しいAPIキーを共有
- [ ] コードを更新
- [ ] v1.0.198 をビルド
- [ ] TestFlight でテスト

---

**新しいAPIキーを2個作成して共有してください！** 🔑
